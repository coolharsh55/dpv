<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2023-10-28 Sat 13:26 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>dpv-docgen-overhall</title>
<meta name="author" content="Harshvardhan J. Pandit" />
<meta name="generator" content="Org Mode" />
<style>
  #content { max-width: 60em; margin: auto; }
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #e6e6e6;
    border-radius: 3px;
    background-color: #f2f2f2;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
  }
  pre.src:before {
    display: none;
    position: absolute;
    top: -8px;
    right: 12px;
    padding: 3px;
    color: #555;
    background-color: #f2f2f299;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-authinfo::before { content: 'Authinfo'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { }
</style>
</head>
<body>
<div id="content" class="content">
<h1 class="title">dpv-docgen-overhall</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#org3b6fa91">1. <span class="todo TODO">TODO</span> Update CSV schemas</a></li>
<li><a href="#org486632a">2. <span class="todo TODO">TODO</span> 200 RDF Generation</a></li>
<li><a href="#orgb24afa4">3. HALT Write down how the CSVs will be mapped to RDF</a></li>
<li><a href="#org7cf34bb">4. <span class="done DONE">DONE</span> Generate a list of concepts for SAME extension and across ALL extensions</a></li>
<li><a href="#org7dcb883">5. HALT Documentation of concepts</a></li>
<li><a href="#orgd31f0ef">6. <span class="done DONE">DONE</span> RDFORM phasing out</a></li>
<li><a href="#org85c5b3a">7. HALT Main DPV HTML spec</a></li>
<li><a href="#orgc5448bf">8. <span class="todo TODO">TODO</span> exports</a></li>
<li><a href="#orgd226614">9. <span class="todo TODO">TODO</span> clean GitHub issues</a></li>
<li><a href="#orge3b8e10">10. <span class="todo TODO">TODO</span> document new document generator</a></li>
</ul>
</div>
</div>

<div id="outline-container-org3b6fa91" class="outline-2">
<h2 id="org3b6fa91"><span class="section-number-2">1.</span> <span class="todo TODO">TODO</span> Update CSV schemas</h2>
<div class="outline-text-2" id="text-1">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> Consent states should not be instances of <code>ConsentStatusInvalid...</code> but
instead should be instances of <code>ConsentStatus</code> and use <code>skos:broader</code></li>
<li class="off"><code>[&#xa0;]</code> Property descriptions should specify it as being a relation or association
rather than assuming the context is known e.g. "specifies&#x2026;"</li>
<li class="off"><code>[&#xa0;]</code> Consent types should be instances of <code>dpv:LegalBasis</code> and then use
<code>skos:broader</code> to relate with <code>dpv:Consent</code>, same for other Legal Basis</li>
<li class="off"><code>[&#xa0;]</code> Duration, Frequency, etc. should be <code>rdfs:subClassOf dpv:Context</code> and then
their specific instances can be instances of Duration etc.</li>
<li class="off"><code>[&#xa0;]</code> all term status should be reverted to <code>accepted</code> after each release, the
<code>modified</code> tags are for admin purposes only, and the modified date can be used
to identify which terms were modified recently</li>
<li class="off"><code>[&#xa0;]</code> <code>Technology</code> and <code>isImplementedByEntity</code> etc. should be in Processing Context</li>
<li class="off"><code>[&#xa0;]</code> introduce <code>dpv:Process</code> and <code>dpv:hasProcess</code> as a shorter and convenient
replacement of <code>dpv:PersonalDataHandling</code> (which is a subclass of Process)</li>
<li class="off"><code>[&#xa0;]</code> <code>dpv:Authority</code> - check what should be a subclass, what should be an
instance with <code>skos:broader</code></li>
<li class="off"><code>[&#xa0;]</code> <code>dpv:DataController</code> should not be an instance of <code>dpv:LegalEntity</code> but should
be <code>skos:broader</code></li>
<li class="off"><code>[&#xa0;]</code> Organisation subtypes should not be instances, but use <code>skos:broader</code></li>
<li class="off"><code>[&#xa0;]</code> Location subtypes should be subclasses</li>
<li class="off"><code>[&#xa0;]</code> TOMs should be instances of top concepts and not subclasses</li>
<li class="off"><code>[&#xa0;]</code> Processing Context should be instances of top concepts where needed and
not always instances of each other</li>
<li class="off"><code>[&#xa0;]</code> DataSubjectScale, ProcessingScale, etc. should be subclasses, and then
they have specific instances</li>
<li class="off"><code>[&#xa0;]</code> Processing taxonomy should all be instances with <code>skos:broader</code></li>
<li class="off"><code>[&#xa0;]</code> Risk taxonomy should be all instances with <code>skos:broader</code></li>
<li class="off"><code>[&#xa0;]</code> In Rules, <code>Obligation</code> etc. should be subclasses</li>
<li class="off"><code>[&#xa0;]</code> In Status, <code>ActivityStatus</code> should be subclass, and its instances (are
correctly generated)</li>
</ul>
</div>
</div>
<div id="outline-container-org486632a" class="outline-2">
<h2 id="org486632a"><span class="section-number-2">2.</span> <span class="todo TODO">TODO</span> 200 RDF Generation</h2>
<div class="outline-text-2" id="text-2">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> <code>skos:ConceptScheme</code> to list related concepts together, can be used to
generate the documentation</li>
<li class="off"><code>[&#xa0;]</code> <code>dct:source</code> links should be rendered from (label,URL)</li>
<li class="off"><code>[&#xa0;]</code> <code>skos:usageNote</code> to be added for guidance in using</li>
<li class="off"><code>[&#xa0;]</code> <code>rdf:Property</code> should also be a <code>skos:Concept</code></li>
<li class="off"><code>[&#xa0;]</code> use <code>rdfs:subPropertyOf</code> where needed</li>
<li class="off"><code>[&#xa0;]</code> add <code>schema:domainIncludes</code> and <code>schema:rangeIncludes</code></li>
<li class="off"><code>[&#xa0;]</code> double check <code>skos:broader</code> or <code>skos:narrower</code> is being used correctly</li>
<li class="off"><code>[&#xa0;]</code> double check whether <code>skos:broader</code> or <code>skos:broaderTransitive</code> is required</li>
<li class="off"><code>[&#xa0;]</code> add <code>skos:broader</code> and <code>skos:narrower</code> both triples whenever one is generated</li>
<li class="off"><code>[&#xa0;]</code> External or reused terms e.g. <code>dpv:isAfter</code> are being declared as new terms
i.e. as <code>dpv:dpv:isAfter</code> - see in rights</li>
</ul>
</div>
</div>

<div id="outline-container-orgb24afa4" class="outline-2">
<h2 id="orgb24afa4"><span class="section-number-2">3.</span> HALT Write down how the CSVs will be mapped to RDF</h2>
<div class="outline-text-2" id="text-3">
<ul class="org-ul">
<li class="on"><code>[X]</code> map the spreadsheet to RDF concepts</li>
<li class="on"><code>[X]</code> how each 'schema' in a CSV will use a 'dict' to generate RDF, the 'dict'
will contain the column name as the label, and the value will be a function
that takes in the value, and the row (to have access to IRI and other fields)
and returns generated RDF triples (multiple)</li>
<li class="off"><code>[&#xa0;]</code> for cases where the CSV has a different 'schema', now only a different set
of mappings are required instead of hacky duplicate code</li>
<li class="off"><code>[&#xa0;]</code> (LATER) write down a note on how the serilisation happens, what should be
a 'class' and what should be an 'instance' under RDFS+SKOS. Write examples to
show how it should be used so as to enable the use of concepts while still
providing extensibility. These examples should go into documentation.</li>
<li class="on"><code>[X]</code> each CSV will be a module i.e. an independent file, and their combination
(i.e. adding of RDF graphs) will form the extension or serialisation. To
denote this, each CSV should be mapped to a file path that is the name of that
module, and this information should be the CSV name</li>
<li class="off"><code>[&#xa0;]</code> (later) specific items should be provided in a manageable or retrievable
list e.g. using <code>skos:ConceptScheme</code> to enable tools to manage them. For this, a
column called <code>ConceptScheme</code> should be added to the CSV. A separate CSV of
concept schemes and CSVs and their filepaths etc. should be created.</li>
<li class="off"><code>[&#xa0;]</code> how to handle external concepts i.e. when a DPV concept is used in another
extension e.g. as a guidance note, or when a non-DPV concept is used e.g. as a
guidance note - these won't have parent relations, so best to use
<code>rdfs:Resource</code> as the parent for these. The RDF schema needs to identify such
external contexts - currently we use <code>prefix:concept</code> in the IRI to denote that
it is an external concept with the prefix being in the namespace list</li>
<li class="off"><code>[&#xa0;]</code> check this approach works with special considerations such as legal basis
and rights mappings and for locations</li>
</ul>
</div>
</div>
<div id="outline-container-org7cf34bb" class="outline-2">
<h2 id="org7cf34bb"><span class="section-number-2">4.</span> <span class="done DONE">DONE</span> Generate a list of concepts for SAME extension and across ALL extensions</h2>
<div class="outline-text-2" id="text-4">
<ul class="org-ul">
<li class="on"><code>[X]</code> when generating the RDF, it is essential to get a list of all concepts in
the module for use in documentation - at different levels i.e. module and
across all DPV extensions. The easiest way to do this is to load each
serialised file graph and extract subjects for LOCAL set, and then to combine
such sets to create GLOBAL lists.</li>
</ul>
</div>
</div>
<div id="outline-container-org7dcb883" class="outline-2">
<h2 id="org7dcb883"><span class="section-number-2">5.</span> HALT Documentation of concepts</h2>
<div class="outline-text-2" id="text-5">
<ul class="org-ul">
<li class="on"><code>[X]</code> determine what is needed for each extension, module, and concept to be
documented - the suggestion is to have concept definition, examples, and
guidance be available. The current table view is difficult to navigate, and
doesn't show related concepts together. To manage this, a cleaner view is
needed where the relevant concepts are described together.</li>
<li class="on"><code>[X]</code> each set of concepts e.g. module, should have an text introducing the
content, and describing the overall structure. It should also have a list of
concepts with definitions and parent relation (just a list, no details).</li>
<li class="on"><code>[X]</code> a later broader list should provide the details of the concept, including
its provenance and other relevant information - this is the current table view
but it should be 'cleaner'</li>
<li class="off"><code>[&#xa0;]</code> create separate pages per module so that there is less overload when using
DPV documentation (main spec) and there is enough space to provide contextual
introduction, guidance, and examples</li>
<li class="off"><code>[&#xa0;]</code> refactor the HTML jinja2 code into macros for reuse</li>
<li class="off"><code>[&#xa0;]</code> add all DPV modules, test all pages are correctly generated</li>
<li class="off"><code>[&#xa0;]</code> test with extensions</li>
<li class="off"><code>[&#xa0;]</code> examples should be included where feasible and at least at the concept set
level e.g. list of statuses.</li>
<li class="off"><code>[&#xa0;]</code> (later) load examples automatically by querying for their subjects or
relevant associations - if for module, it goes in the introduction section, if
for concept then it goes in the concept detailed view</li>
</ul>
</div>
</div>
<div id="outline-container-orgd31f0ef" class="outline-2">
<h2 id="orgd31f0ef"><span class="section-number-2">6.</span> <span class="done DONE">DONE</span> RDFORM phasing out</h2>
<div class="outline-text-2" id="text-6">
<ul class="org-ul">
<li class="on"><code>[X]</code> determine whether RDFORM should be phased out (yes - it seems). The
purpose of the ORM is to make it easy to pull related properties and concepts
using python classes/dicts during RDF generation and HTML generation. However,
it is buggy and prone to causing cryptic issues. A better simpler structure
might be to keep a global list and to use functional wrappers to get the
information from it using rdf prefixes, and optionally to have an API to get
the specific forms of information e.g. strings, IRIs, list of parent classes,
list of subclasses, etc. - which are needed in the documentation. Also needed
are prefixed forms e.g. "dpv-pd:Email" from the IRI</li>
</ul>
</div>
</div>
<div id="outline-container-org85c5b3a" class="outline-2">
<h2 id="org85c5b3a"><span class="section-number-2">7.</span> HALT Main DPV HTML spec</h2>
<div class="outline-text-2" id="text-7">
<ul class="org-ul">
<li class="on"><code>[X]</code> determine what should go in the main DPV spec, suggestion is to have less
"technical spec" right at the start, and to instead provide some introductory
content, a list of DPV documents, some get started guides, and examples, and
then provide the list of concepts</li>
<li class="on"><code>[X]</code> the document should not jump straight into concepts, but should first
provide a list of 'modules' or 'sets' with links to their relevant sections,
and in those modules the concepts are described as summaries with guidance,
and then there is a detailed list of all concepts at the end</li>
<li class="off"><code>[&#xa0;]</code> (later) there should be some 'hierarchy' view of the concepts - whether
textual or visual depends on the context and ease of keeping it up to date;
for now it could be linked tree representation for concepts in the hierarchy</li>
<li class="on"><code>[X]</code> show suggested uses with <code>dcam:domain/rangeIncludes</code></li>
</ul>
</div>
</div>
<div id="outline-container-orgc5448bf" class="outline-2">
<h2 id="orgc5448bf"><span class="section-number-2">8.</span> <span class="todo TODO">TODO</span> exports</h2>
<div class="outline-text-2" id="text-8">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> (later) provide README or other guidance with the exported concent,
ideally have an autogenerated PDF with the list of concepts, HTML
documentation etc.</li>
<li class="off"><code>[&#xa0;]</code> provide JSON and CSV exports which are easy to 'ingest' with convenient
formatting e.g. <code>{ term: { contents } }</code> rather than having an "RDF graph"</li>
</ul>
</div>
</div>
<div id="outline-container-orgd226614" class="outline-2">
<h2 id="orgd226614"><span class="section-number-2">9.</span> <span class="todo TODO">TODO</span> clean GitHub issues</h2>
<div class="outline-text-2" id="text-9">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> identify issues that are stale, and what should be done about them</li>
<li class="off"><code>[&#xa0;]</code> rewrite labels to be better descriptions</li>
<li class="off"><code>[&#xa0;]</code> create templates for people to ask questions e.g. how to use a concept, or
why is X like this, or how to apply DPV for specific scenarios</li>
</ul>
</div>
</div>
<div id="outline-container-orge3b8e10" class="outline-2">
<h2 id="orge3b8e10"><span class="section-number-2">10.</span> <span class="todo TODO">TODO</span> document new document generator</h2>
<div class="outline-text-2" id="text-10">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> comment code, make it easy to pick it up later</li>
<li class="off"><code>[&#xa0;]</code> add notes for what to do when e.g. a new concept is added, a new extension
is added, or a schema for a CSV changes</li>
</ul>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Harshvardhan J. Pandit</p>
<p class="date">Created: 2023-10-28 Sat 13:26</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>